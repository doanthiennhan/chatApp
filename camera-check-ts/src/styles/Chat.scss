/* src/styles/Chat.scss */

// Import theme variables if they are in a separate file
// @import './_themes.scss';

// Define keyframes for animations
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}



.sidebar-toggle-button {
  position: absolute !important;
  top: 0;
  left: 0; // Initial position
  z-index: 1000;
  transition: transform 0.2s ease-in-out, background-color 0.3s ease;
  
  &.ant-btn-icon-only {
    width: 64px;
    height: 64px;
  }

  &.collapsed {
    transform: translateX(300px); // Move to the right edge of the content
    background-color: var(--accent-main, #0A84FF); // Change color when collapsed
    color: #fff; // Change icon color
  }
}

/* --- Sidebar --- */
.chat-sidebar-container {
  background: var(--bg-primary) !important;
  border-right: 1px solid var(--border-primary) !important;
  display: flex;
  flex-direction: column;
  height: 100%;
  transition: background-color 0.3s ease, border-color 0.3s ease;
  box-shadow: 2px 0 5px rgba(0,0,0,0.05);

  &.ant-layout-sider-collapsed {
    background-color: var(--bg-tertiary) !important; // Subtle background change
    .sidebar-header,
    .conversation-list {
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }
  }
}

.sidebar-header {
  padding: 20px;
  border-bottom: 1px solid var(--border-primary);
  flex-shrink: 0;
  text-align: center;
  margin-bottom: 16px; // Space between search and buttons
}

.conversation-list {
  flex: 1;
  overflow-y: auto;
  padding: 12px;

  .ant-list-item {
    padding: 15px 20px;
    margin: 0 8px 12px 8px; // Increased margin-bottom
    border-radius: 12px;
    border: none !important;
    cursor: pointer;
    transition: background-color 0.2s ease-in-out, transform 0.2s ease;

    &:hover {
      background-color: var(--bg-tertiary);
      transform: translateY(-2px);
    }

    &.active {
      background-color: var(--accent-main, #0A84FF);
      color: #fff;
      .ant-typography-strong {
        color: #fff !important;
      }
      .ant-typography-secondary {
        color: rgba(255,255,255,0.8);
      }
    }
  }

  .ant-list-item-meta-title {
    margin-bottom: 4px !important;
  }
  .ant-list-item-meta-description {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .ant-list-item-meta-avatar .ant-avatar {
    width: 48px; // Larger avatar
    height: 48px;
    line-height: 48px;
    font-size: 24px;
  }

  .ant-badge-count {
    font-size: 12px; // Larger unread count
    padding: 0 6px;
    height: 20px;
    line-height: 20px;
    border-radius: 10px;
    background-color: var(--accent-main, #0A84FF); // Prominent color
  }
}

.sidebar-tabs {
  margin-bottom: 16px; // Space below tabs
  .ant-tabs-nav {
    margin-bottom: 0;
  }
  .ant-tabs-tab {
    padding: 12px 0; // More vertical padding
    font-size: 15px;
    font-weight: 500;
    transition: color 0.3s ease;
  }
  .ant-tabs-tab-active {
    .ant-tabs-tab-btn {
      color: var(--accent-main, #0A84FF) !important;
    }
  }
  .ant-tabs-ink-bar {
    background: var(--accent-main, #0A84FF);
  }
}

.chat-window {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--bg-secondary);
}

.chat-header {
  padding: 16px 24px;
  border-bottom: 1px solid var(--border-primary);
  background: var(--bg-primary);
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  z-index: 1;
}

.message-list {
  flex: 1;
  overflow-y: auto;
  padding: 24px;
  background: var(--bg-secondary);
  display: flex;
  flex-direction: column;
  gap: 16px;
}


.message-container {
  display: flex;
  align-items: flex-end;
  gap: 10px;
  animation: fadeIn 0.4s ease-out;

  &.sent {
    justify-content: flex-end;
  }

  &.received {
    justify-content: flex-start;
  }
}


.message-content-wrapper {
  display: flex;
  flex-direction: column;
  max-width: 70%;
}

.message-bubble {
  padding: 12px 16px;
  border-radius: 20px;
  font-size: 15px;
  line-height: 1.5;
  box-shadow: 0 2px 4px rgba(0,0,0,0.08);

  &.sent-bubble {
    background: var(--accent-main, #0A84FF);
    color: #fff;
    border-bottom-right-radius: 5px;
  }

  &.received-bubble {
    background: var(--bg-primary);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
    border-bottom-left-radius: 5px;
  }
}


.message-timestamp {
  font-size: 11px;
  color: var(--text-secondary);
  margin-top: 4px;
  padding: 0 5px;
}

.sent .message-timestamp { text-align: right; }
.received .message-timestamp { text-align: left; }

.message-input-area {
  padding: 16px 24px;
  border-top: 1px solid var(--border-primary);
  background: var(--bg-primary);
  flex-shrink: 0;

  .ant-space-compact-wrapper {
    display: flex;
    align-items: center;
    background-color: var(--bg-secondary);
    border-radius: 24px;
    padding: 6px;
    border: 1px solid var(--border-primary);
    transition: border-color 0.3s ease;
    &:focus-within {
        border-color: var(--accent-main, #0A84FF);
    }
  }

  .ant-input-affix-wrapper, .ant-input {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    font-size: 15px;
  }

  .ant-btn-primary {
    border-radius: 20px;
    box-shadow: none !important;
    padding: 0 20px;
    height: 38px;
  }
}

/* --- Sidebar --- */
.chat-sidebar-container {
  background: var(--bg-primary) !important;
  border-right: 1px solid var(--border-primary) !important;
  display: flex;
  flex-direction: column;
  height: 100%;
  transition: background-color 0.3s ease, border-color 0.3s ease;
  box-shadow: 2px 0 5px rgba(0,0,0,0.05);

  &.ant-layout-sider-collapsed {
    .sidebar-header,
    .conversation-list {
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }
  }
}

.sidebar-header {
  padding: 20px;
  border-bottom: 1px solid var(--border-primary);
  flex-shrink: 0;
  text-align: center;
}

.conversation-list {
  flex: 1;
  overflow-y: auto;
  padding: 12px;

  .ant-list-item {
    padding: 15px 20px;
    margin: 0 8px 8px 8px;
    border-radius: 12px;
    border: none !important;
    cursor: pointer;
    transition: background-color 0.2s ease-in-out, transform 0.2s ease;

    &:hover {
      background-color: var(--bg-tertiary);
      transform: translateY(-2px);
    }

    &.active {
      background-color: var(--accent-main, #0A84FF);
      color: #fff;
      .ant-typography-strong {
        color: #fff !important;
      }
      .ant-typography-secondary {
        color: rgba(255,255,255,0.8);
      }
    }
  }

  .ant-list-item-meta-title {
    margin-bottom: 4px !important;
  }
  .ant-list-item-meta-description {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}

.chat-window {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--bg-secondary);
}

.chat-header {
  padding: 16px 24px;
  border-bottom: 1px solid var(--border-primary);
  background: var(--bg-primary);
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  z-index: 1;
}

.message-list {
  flex: 1;
  overflow-y: auto;
  padding: 24px;
  background: var(--bg-secondary);
  display: flex;
  flex-direction: column;
  gap: 16px;
}


.message-container {
  display: flex;
  align-items: flex-end;
  gap: 10px;
  animation: fadeIn 0.4s ease-out;

  &.sent {
    justify-content: flex-end;
  }

  &.received {
    justify-content: flex-start;
  }
}


.message-content-wrapper {
  display: flex;
  flex-direction: column;
  max-width: 70%;
}

.message-bubble {
  padding: 12px 16px;
  border-radius: 20px;
  font-size: 15px;
  line-height: 1.5;
  box-shadow: 0 2px 4px rgba(0,0,0,0.08);

  &.sent-bubble {
    background: var(--accent-main, #0A84FF);
    color: #fff;
    border-bottom-right-radius: 5px;
  }

  &.received-bubble {
    background: var(--bg-primary);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
    border-bottom-left-radius: 5px;
  }
}


.message-timestamp {
  font-size: 11px;
  color: var(--text-secondary);
  margin-top: 4px;
  padding: 0 5px;
}

.sent .message-timestamp { text-align: right; }
.received .message-timestamp { text-align: left; }

.message-input-area {
  padding: 16px 24px;
  border-top: 1px solid var(--border-primary);
  background: var(--bg-primary);
  flex-shrink: 0;

  .ant-space-compact-wrapper {
    display: flex;
    align-items: center;
    background-color: var(--bg-secondary);
    border-radius: 24px;
    padding: 6px;
    border: 1px solid var(--border-primary);
    transition: border-color 0.3s ease;
    &:focus-within {
        border-color: var(--accent-main, #0A84FF);
    }
  }

  .ant-input-affix-wrapper, .ant-input {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    font-size: 15px;
  }

  .ant-btn-primary {
    border-radius: 20px;
    box-shadow: none !important;
    padding: 0 20px;
    height: 38px;
  }
}